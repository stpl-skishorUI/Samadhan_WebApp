<div class="login-body">
    <div class="center-screen">
        <div class="d-flex w-100">
            <div class="logos">
                <div class="d-flex align-items-start flex-column h-100">
                    <div class="mb-auto pt-4">
                        <img src="../../../assets/Login/Login-Samadhan-Logo.svg" alt="Samadhan logo">
                    </div>
                    <div class="mx-auto">
                        <img src="../../../assets/Login/Osmanabad-District.svg" alt="osmanabad district">
                    </div>
                </div>
            </div>
            <div class="login-width">
                <div class="d-flex justify-content-between d-lg-none mobile-logo">
                    <img src="../../../assets/Login/Login-Samadhan-Logo.svg" alt="Samadhan logo">
                    <img src="../../../assets/Login/Osmanabad-District.svg" alt="osmanabad district">
                </div>

                <div class="login-box">
                    <ng-container *ngIf="sendOTPContainer">
                        <h5 class="text-center mb-5">FORGOT PASSWORD</h5>
                        <form [formGroup]="sendOTPForm" (ngSubmit)="sendOTP()">
                            <div class="mb-3">
                                <label class="form-label">
                                    Mobile No.
                                </label>
                                <mat-form-field appearance="outline" class="w-100">
                                    <mat-label>Mobile No.</mat-label>
                                    <input matInput placeholder="Ex.8922220022" formControlName="MobileNo"
                                        maxlength="10"
                                        (keypress)="validation.noSpaces($event) && validation.acceptedOnlyNumbers($event)">
                                    <mat-error *ngIf="f['MobileNo'].errors">
                                        <span *ngIf="f['MobileNo'].hasError('required')"> Please Enter
                                            Mobile No.</span>
                                    </mat-error>
                                    <mat-error *ngIf="f['MobileNo'].hasError('pattern')">
                                        Please Enter Valid Mobile No.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <button type="submit" mat-raised-button class="bg-main w-100 mb-3">SEND OTP</button>
                        </form>
                    </ng-container>

                    <ng-container *ngIf="verifyOTPContainer">
                        <h5 class="text-center mb-5">VERIFY OTP</h5>
                        <form [formGroup]="verifyOTPForm" (ngSubmit)="verifyOTP()">
                            <div class="mb-3">
                                <label class="form-label">
                                    Enter OTP
                                </label>
                                <div class="d-flex justify-content-between">
                                    <div style="width: 50px;">
                                        <mat-form-field appearance="outline" class="w-100">
                                            <input matInput formControlName="otpA" maxlength="1" autocomplete="off"
                                                #input1
                                                (keyup)="(input1.value.length == 1) ? input2.focus() : 'input1.focus()'"
                                                (keypress)="validation.noSpaces($event) && validation.acceptedOnlyNumbers($event)">
                                        </mat-form-field>
                                    </div>
                                    <div style="width: 50px;">
                                        <mat-form-field appearance="outline" class="w-100">
                                            <input matInput formControlName="otpB" maxlength="1" autocomplete="off"
                                                #input2
                                                (keyup)="(input2.value.length == 1) ? input3.focus() : 'input2.focus()'"
                                                (keypress)="validation.noSpaces($event) && validation.acceptedOnlyNumbers($event)"
                                                (keyup.backspace)="input1.focus()">
                                        </mat-form-field>
                                    </div>
                                    <div style="width: 50px;">
                                        <mat-form-field appearance="outline" class="w-100">
                                            <input matInput formControlName="otpC" maxlength="1" autocomplete="off"
                                                #input3
                                                (keyup)="(input3.value.length == 1) ? input4.focus() : 'input3.focus()'"
                                                (keypress)="validation.noSpaces($event) && validation.acceptedOnlyNumbers($event)"
                                                (keyup.backspace)="input2.focus()">
                                        </mat-form-field>
                                    </div>
                                    <div style="width: 50px;">
                                        <mat-form-field appearance="outline" class="w-100">
                                            <input matInput formControlName="otpD" maxlength="1" autocomplete="off"
                                                #input4
                                                (keyup)="(input4.value.length==1)? input5.focus():'input4.focus()'"
                                                (keypress)="validation.noSpaces($event) && validation.acceptedOnlyNumbers($event)"
                                                (keyup.backspace)="input3.focus()">
                                        </mat-form-field>
                                    </div>
                                    <div style="width: 50px;">
                                        <mat-form-field appearance="outline" class="w-100">
                                            <input matInput formControlName="otpE" maxlength="1" autocomplete="off"
                                                #input5 (keyup)="(input5.value.length == 1) ? input5.focus() : ''"
                                                (keypress)="validation.noSpaces($event) && validation.acceptedOnlyNumbers($event)"
                                                (keyup.backspace)="input4.focus()">
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>

                            <button mat-raised-button class="bg-main w-100 mb-3">VERIFY OTP</button>
                        </form>
                    </ng-container>

                    <ng-container *ngIf="changePassContainer">
                    <h5 class="text-center mb-5">RESET PASSWORD</h5>
                        <form [formGroup]="changePassword">
                            <div class="mb-3">
                                <mat-form-field appearance="outline" class="w-100">
                                    <mat-label>New Password</mat-label>
                                    <input matInput [type]="hideNewPass ? 'password' : 'text'"
                                        formControlName="NewPassword" autocomplete="off" maxlength="20"
                                        (keypress)="validation.noSpaces($event)" (keyup)="validationaddremove()">
                                    <mat-error *ngIf="h['NewPassword'].errors" (keypress)="validation.noSpaces($event)">
                                        <span *ngIf="h['NewPassword'].hasError('required')"> Please Enter
                                            New Password</span>
                                    </mat-error>
                                    <mat-error *ngIf="h['NewPassword'].hasError('pattern')">
                                        Please Enter Valid New Password
                                    </mat-error>

                                    <button mat-icon-button matSuffix (click)="hideNewPass = !hideNewPass"
                                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideNewPass">
                                        <span class="material-symbols-outlined">
                                            {{hideNewPass==false ? 'visibility':'visibility_off'}} </span>
                                    </button>
                                </mat-form-field>
                            </div>
                            <div class="mb-3">
                                <mat-form-field appearance="outline" class="w-100">
                                    <mat-label>Confirm Password</mat-label>
                                    <input matInput [type]="hideConfirmPass ? 'password' : 'text'"
                                        formControlName="ConfirmPassword" autocomplete="off"  maxlength="20"
                                        (keypress)="validation.noSpaces($event)">
                                    <mat-error *ngIf="h['ConfirmPassword'].errors" >
                                        <span *ngIf="h['ConfirmPassword'].hasError('required')"> Please Enter
                                            Confirm Password</span>
                                    </mat-error>
                                    <mat-error *ngIf="h['ConfirmPassword'].hasError('pattern')">
                                        Please Enter Valid New Password
                                    </mat-error>
                                    <mat-error *ngIf="changePassword.controls['ConfirmPassword'].hasError('notMatched')">
                                        New Password and Confirm Password not matching.
                                      </mat-error>
                                    <button mat-icon-button matSuffix (click)="hideConfirmPass = !hideConfirmPass"
                                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideConfirmPass">
                                        <span class="material-symbols-outlined">
                                            {{hideConfirmPass==false ? 'visibility':'visibility_off'}} </span>
                                    </button>
                                </mat-form-field>
                            </div>
                            <button mat-raised-button class="bg-main w-100 mt-3"
                                    (click)="ChangePassword()">Submit</button>
                        </form>
                    </ng-container>
                    <div class="text-end" *ngIf="verifyOTPContainer">
                        <a class="text-main" (click)="sendOTP()" *ngIf="timerFlag == true">Resend OTP</a>
                    </div>
                    <div *ngIf="verifyOTPContainer">
                        <span *ngIf="timerFlag == false" class="mb-2 ml-4 text-main">
                            Resend OTP in 00.{{timeLeft}}</span>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>