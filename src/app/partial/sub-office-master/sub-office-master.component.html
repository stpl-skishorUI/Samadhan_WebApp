<div class="row">
    <div class="col-sm-8">
        <!-- filterform start -->
        <form [formGroup]="filterSubOfficeForm">
            <div class="row">
                <div class="col-sm-4">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>{{'Home.select_department' | translate}}</mat-label>
                        <mat-select formControlName="deptId" (selectionChange)="clearFilter('dept'); getOffices(filterSubOfficeForm.value.deptId);filterData();" [disabled]="dropdownDisable">
                          <mat-option value="0">{{'Home.all_dept' | translate}}</mat-option>
                          <mat-option *ngFor="let dept of departmentArr" [value]="dept.deptId">
                            {{ langTypeName == 'English' ? (dept.departmentName | titlecase) : dept.m_DepartmentName}} </mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>
                <div class="col-sm-4">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>{{'Home.select_office' | translate}} </mat-label>
                        <mat-select formControlName="officeId" (selectionChange)="clearFilter('office');filterData()"
                            [disabled]='!filterSubOfficeForm.value.deptId || this.localData?.userTypeId == 4'>
                            <mat-option value="0">{{'Home.all_off' | translate}}</mat-option>
                            <mat-option *ngFor="let office of officeArray" [value]="office.id">
                                {{ langTypeName == 'English' ?
                                office.name : office.m_OfficeName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-sm-4">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>{{'Home.sub_office_name' | translate}} </mat-label>
                      <input matInput placeholder="{{'Home.search' | translate}}" formControlName="subOfficeName"
                        (keypress)="validation.noFirstSpaceAllow($event)">
                      <button mat-icon-button matSuffix *ngIf="filterSubOfficeForm.value.subOfficeName" matTooltip="close" aria-label="tooltip"
                        (click)="filterSubOfficeForm.controls['subOfficeName'].setValue('')">
                        <span class="material-symbols-outlined">
                          close
                        </span>
                      </button>
                    </mat-form-field>
                  </div>
            </div>
        </form>
<!-- filterform ends here -->
        <div class="table-responsive">
            <table mat-table [dataSource]="dataSource" class="dashboard-table w-100">
                <ng-container matColumnDef="srNo">
                    <th mat-header-cell *matHeaderCellDef class="srno"> {{'Home.sr_no' | translate}} </th>
                    <td mat-cell *matCellDef="let element let i= index"> {{ element.srNo }} </td>
                  </ng-container>
          
                <!-- department Column -->
                <ng-container matColumnDef="departmentName">
                    <th mat-header-cell *matHeaderCellDef class="departmentName"> {{'Home.department' | translate}} </th>
                    <td mat-cell *matCellDef="let element"> {{ langTypeName == 'English' ? (element.departmentName | titlecase) :
                        element.m_DepartmentName}}</td>                  
                </ng-container>

                <!-- office Column -->
                <ng-container matColumnDef="officeName">
                    <th mat-header-cell *matHeaderCellDef class="officeName"> {{'Home.office' | translate}} </th>
                    <td mat-cell *matCellDef="let element"> {{ langTypeName == 'English' ? (element.officeName | titlecase) :
                        element.m_OfficeName}}</td>                      
                </ng-container>

                <!-- suboffice Column -->
                <ng-container matColumnDef="SubOfficeName">
                    <th mat-header-cell *matHeaderCellDef class="subOfficeName"> {{'Home.sub_office' | translate}} </th>
                    <td mat-cell *matCellDef="let element"> {{ langTypeName == 'English' ? (element.subOfficeName | titlecase) :
                        element.m_SubOfficeName}}</td>                      
                </ng-container>
                
                <!--  Action column-->
                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef class="action">{{'Home.action' | translate}}<br>
                      <button [disabled]="this.selection.selected.length ==0" mat-icon-button (click)="deleteData()">
                        <span class="material-symbols-outlined">
                          delete
                        </span>
                      </button>
                      <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
                        [disabled]="!totalPages">
                        <!-- [indeterminate]="selection.hasValue() && !isAllSelected()"> -->
                      </mat-checkbox>
            
                    </th>
                    <td mat-cell *matCellDef="let element" class="action">
                      <button mat-icon-button (click)="editSubOffice(element)" class="btn-edit">
                        <span class="material-symbols-outlined">
                          edit_square
                        </span>
                      </button>
                      <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(element) : null"
                        [checked]="selection.isSelected(element)">
                      </mat-checkbox>
                    </td>
                  </ng-container>
                  <tr class="mat-row p-2 w-100" *matNoDataRow col>
                    <td colspan="9">
                      <div class="alert alert-danger text-center m-2 mt-2">
                        {{'Home.no_data_found' | translate}}
                      </div>
                    </td>
                  </tr>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{'highlightedRow ':highlightedRow == row.id}">
                </tr>
            </table>
        </div>
        <ng-container *ngIf="totalPages>10">
            <mat-paginator [pageSize]="10" [length]="totalPages" (page)="pageChanged($event)" showFirstLastButtons>
            </mat-paginator>
          </ng-container>
    </div>

    <div class="col-sm-4">
        <div class="card form-card">
            <div class="card-header">
                {{'Home.add_sub_Office' | translate}}
            </div>
            <form>
                <div class="card-body">
                    <div class="mb-3">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>{{'Home.department' | translate}}</mat-label>
                            <mat-select>
                                <mat-option value="0"></mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="mb-3">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>{{'Home.office' | translate}}</mat-label>
                            <mat-select>
                                <mat-option value="0"></mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="mb-3">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>{{'Home.sub_office_name' | translate}}</mat-label>
                            <input matInput>
                          </mat-form-field>
                    </div>
                    <div class="mb-3">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>{{'Home.sub_office_name_marathi' | translate}}</mat-label>
                            <input matInput>
                          </mat-form-field>                                               
                    </div>
                    <div class="mb-3"> 
                        <mat-label>{{'Home.sub_office_address' | translate}} </mat-label>
                        <textarea aria-label="Number" matInput  autocorrect="off" autocomplete="off"
                           autocapitalize="off" spellcheck="off" type="text" #search></textarea>                       
                    </div>
                    <div class="mb-3">
                        <mat-form-field appearance="outline" class="w-100 ">
                            <mat-label>{{'Home.sub_off_email_id' | translate}} </mat-label>
                            <input matInput     >
                          </mat-form-field>                      
                    </div>
                    <div class="mb-3">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>{{'Home.sub_off_designation' | translate}} </mat-label>
                            <input matInput  >                          
                         </mat-form-field>
                    </div>
                    <div class="mb-3">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>{{'Home.sub_off_landline' | translate}}</mat-label>
                            <input matInput  >                          
                          </mat-form-field>
                    </div>
                    <div class="text-end mb-2">
                        <button mat-stroked-button class="btn-main-outline" type="button">{{'Home.cancel'
                            | translate}}</button>
                        <button mat-stroked-button class="btn-main ms-2" type="submit">Submit</button>
                      </div>
                </div>
            </form>
        </div>
    </div>
</div>